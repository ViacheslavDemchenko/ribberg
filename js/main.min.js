"use strict";window.addEventListener("DOMContentLoaded",function(){!function(){ymaps.ready(function(){(e=new ymaps.Map("yandex-map",{center:[55.753595,37.621031],zoom:16})).behaviors.disable("scrollZoom"),e.behaviors.disable("drag"),e.events.add("click",function(){e.behaviors.enable("scrollZoom"),e.behaviors.enable("drag")}),t=new ymaps.Placemark([55.753595,37.621031],{},{iconLayout:"default#image",iconImageSize:[20,20]}),e.geoObjects.add(t)});var e=void 0,t=void 0}(),function(){var e=$("#menu__button"),t=$(".nav-list"),n=$(".nav__link"),o="nav-list--active";function a(){e.hasClass("active")?e.removeClass("active"):e.addClass("active")}e.on("click",function(e){e.preventDefault(),t.toggleClass(o),a(),console.log("Yes")}),n.on("click",function(){t.removeClass(o),a()}),$(window).resize(function(){1024<$(window).width()&&(t.removeAttr("style"),t.removeClass(o),e.hasClass("active")&&e.removeClass("active"))})}(),$("#slick").slick({dots:!1,infinite:!1,speed:1e3,touchMove:!0,slidesToShow:1,slidesToScroll:1,draggable:!0,pauseOnHover:!0,prevArrow:'<button type="button" class="slick-arrow slick-prev"><span>Previous</span></button>',nextArrow:'<button type="button" class="slick-arrow slick-next"><span>Next</span></button>',responsive:[{breakpoint:600,settings:{arrows:!1}}]}),function(){var e=document.getElementById("square"),t=document.getElementById("lamps"),n=document.querySelectorAll(".calc-checkbox__item"),o=document.querySelector(".calc__btn"),a=document.getElementById("total"),r=document.querySelector(".square-warning"),d=document.querySelector(".lamps-warning"),l=void 0,u=0,v=0,p=0;function i(e,t){var n=document.getElementById(e);if(n){var o=n.value;t.test(o)||(o=""),setInterval(function(){var e=n.value;e!=o&&t.test(e)&&(o=e,n.value=o)},10)}}e.addEventListener("keyup",function(){i("square",/^[0-9\.]*[.]?[0-9]*$/),v=e.value,r.style.display="",d.style.display="",a.textContent=0,u=l*v+50*p}),t.addEventListener("keyup",function(){i("lamps",/^[0-9]*$/),p=t.value,r.style.display="",d.style.display="",a.textContent=0,u=l*v+50*p}),function(){for(var e=function(e){n[e].checked&&(l=n[e].value),n[e].addEventListener("change",function(){a.textContent=0,l=n[e].value,u=l*v+50*p})},t=0;t<n.length;t++)e(t)}(),o.addEventListener("click",function(){var e,t,n,o,a,l,i,s,c;""==v&&""==p?(u=0,r.style.display="block",d.style.display="block"):0==v&&0==p?(u=0,r.style.display="block",d.style.display="block"):""==v||0==v?(u=0,r.style.display="block"):""==p||0==p?(u=0,d.style.display="block"):(r.style.display="",d.style.display="",e="total",o=3e3,a=(n=u)-(t=0),l=t,i=Math.abs(Math.floor(o/a)),s=document.getElementById(e),c=setInterval(function(){l+=50,s.textContent=l,n<=l&&clearInterval(c)},i))})}(),$("nav a,a[href='#top'],a[rel='m_PageScroll2id'],a.PageScroll2id").mPageScroll2id({highlightSelector:"nav a"}),(new WOW).init(),$(window).scroll(function(){700<$(this).scrollTop()?$("#toTop").fadeIn():$("#toTop").fadeOut()}),$("#toTop").click(function(){$("body,html").animate({scrollTop:0},800)}),function(){function e(e){var t=new Image;t.src="data:image/webp;base64,UklGRi4AAABXRUJQVlA4TCEAAAAvAUAAEB8wAiMwAgSSNtse/cXjxyCCmrYNWPwmHRH9jwMA",t.onload=t.onerror=function(){e(2===t.height)}}var t=void 0;e(function(e){return e?(t=!0,console.log("Поддерживает webp")):(t=!1,console.log("Не поддерживает webp")),t});!function(e,t,n,o,a){for(var l=document.querySelectorAll("."+e),i=window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI,s=void 0,c=void 0,r=0;r<l.length;r++)c=(l[r].currentStyle||window.getComputedStyle(l[r],!1)).backgroundImage.replace(/"/g,"").replace(/\(/g,"").replace(/\)/g,"").replace(/url/g,""),1===i?s=c.replace(/@1x.jpg/g,t):1.5<i&&(s=c.replace(/@1x.jpg/g,n)),l[r].style.backgroundImage="url("+s+")"}("bg-img","@1x.webp","@2x.webp")}()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsInltYXBzIiwibXlNYXAiLCJNYXAiLCJjZW50ZXIiLCJ6b29tIiwiYmVoYXZpb3JzIiwiZGlzYWJsZSIsImV2ZW50cyIsImFkZCIsIm15UGxhY2VtYXJrIiwiUGxhY2VtYXJrIiwiaWNvbkltYWdlU2l6ZSIsImljb25MYXlvdXQiLCJnZW9PYmplY3RzIiwibWVudUJ1dHRvbiIsIm1lbnVNb2JpbGVPcGVuIiwibWVudU1vYmlsZSIsIiQiLCJtZW51TGluayIsInNjcmVlbldpZHRoQ2hlY2siLCJyZW1vdmVDbGFzcyIsImFkZENsYXNzIiwiY29uc29sZSIsInRvZ2dsZUNsYXNzIiwib24iLCJyZW1vdmVBdHRyIiwiaGFzQ2xhc3MiLCJ0b3VjaE1vdmUiLCJzbGlkZXNUb1Nob3ciLCJzbGlkZXNUb1Njcm9sbCIsImRyYWdnYWJsZSIsInBhdXNlT25Ib3ZlciIsInByZXZBcnJvdyIsIm5leHRBcnJvdyIsInJlc3BvbnNpdmUiLCJicmVha3BvaW50Iiwic2V0dGluZ3MiLCJhcnJvd3MiLCJzcXVhcmUiLCJjaGVja2JveFZhbHVlIiwibGFtcHMiLCJsYW1wc1ByaWNlIiwiZ2V0RWxlbWVudEJ5SWQiLCJjaGVja2JveGVzIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiY2FsY0J0biIsInJlc3VsdCIsInF1ZXJ5U2VsZWN0b3IiLCJjYWxjVG90YWwiLCJzcXVhcmVWYWx1ZSIsInNxdWFyZVdhcm5pbmciLCJsYW1wc1ZhbHVlIiwibGFtcHNXYXJuaW5nIiwiaW5wdXRDaGVjayIsInJlZ2V4IiwibGFzdFZhbHVlIiwiaWQiLCJlbGVtZW50Iiwic2V0SW50ZXJ2YWwiLCJ2YWx1ZSIsInRlc3QiLCJkaXNwbGF5Iiwic3R5bGUiLCJ0ZXh0Q29udGVudCIsImNoZWNrYm94ZXNDaGVjayIsInRvdGFsIiwiaSIsImNoZWNrZWQiLCJzdGVwVGltZSIsIk1hdGgiLCJhYnMiLCJyYW5nZSIsImN1cnJlbnQiLCJ0aW1lciIsImFuaW1hdGVWYWx1ZSIsInN0YXJ0IiwiaW5jcmVtZW50IiwiZmxvb3IiLCJkdXJhdGlvbiIsImVuZCIsImNsZWFySW50ZXJ2YWwiLCJtUGFnZVNjcm9sbDJpZCIsImhpZ2hsaWdodFNlbGVjdG9yIiwiV09XIiwiaW5pdCIsInNjcm9sbCIsImFuaW1hdGUiLCJzY3JvbGxUb3AiLCJmYWRlSW4iLCJmYWRlT3V0IiwiY2xpY2siLCJ0ZXN0V2ViUCIsImNhbGxiYWNrIiwiSW1hZ2UiLCJ3ZWJQIiwic3VwcG9ydGVkIiwib25sb2FkIiwiYnJvd3NlciIsImhlaWdodCIsImJnSW1nT3B0IiwidXJsV2VicDF4IiwidXJsV2VicDJ4IiwiaW1hZ2VzIiwidXJsSnBnMngiLCJwcmV2VXJsRW5kIiwiaW1hZ2VGb2xkZXJJbmRleCIsInB1cmVVcmwiLCJkZXZpY2VQaXhlbFJhdGlvIiwic2NyZWVuIiwiZGV2aWNlWERQSSIsImxvZ2ljYWxYRFBJIiwibmV3VVJMIiwiaW1hZ2VMaXN0IiwiYmdJbWFnZXMiLCJsZW5ndGgiLCJjdXJyZW50U3R5bGUiLCJnZXRDb21wdXRlZFN0eWxlIiwicGl4ZWxSYXRpbyIsInJlcGxhY2UiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJpbWFnZVR5cGVDaGFuZ2UiXSwibWFwcGluZ3MiOiJhQUFBQSxPQUFPQyxpQkFBaUIsbUJBQW9CLFlBUTVDLFdBRUlDLE1BQUFBLE1BS0EsWUFFSUMsRUFBQUEsSUFBUUQsTUFBSUEsSUFBTUUsYUFBSSxDQUNsQkMsT0FBQUEsQ0FBQUEsVUFBUyxXQUNUQyxLQUFBQSxNQUdKSCxVQUFNSSxRQUFVQyxjQUNoQkwsRUFBQUEsVUFBTUksUUFBVUMsUUFDaEJMLEVBQUFBLE9BQU1NLElBQU9DLFFBQUksV0FDakJQLEVBQUFBLFVBQU1JLE9BQU4sY0FDQUosRUFBQUEsVUFBTUksT0FBTixVQUdBSSxFQUFBQSxJQUFjVCxNQUFJQSxVQUFNVSxDQUFBQSxVQUFXLFdBQVcsR0FJOUNDLENBRkFDLFdBRkEsZ0JBSUFELGNBQWUsQ0FB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QUFBLEVBRUpOLEVBVkQsU0FBQUksR0FDSSxPQUFJQSxHQVdaRSxHQUFBLEVBQ1VFLFFBQUFBLElBQVcsdUJBR2JDLEdBQUFBLEVBQ0FDLFFBQUFBLElBQVcseUJBSGRDLEtBV0EsU0FJcUJBLEVBQUFGLEVBQUFDLEVBQUFFLEVBQUFDLEdBV2QsSUFUQUMsSUFBQUEsRUFBQUEsU0FBQUEsaUJBQUFBLElBTlBILEdBT09JLEVBQUFBLE9BVnFFQyxrQkFVNUQ5RyxPQUFBK0csT0FBQUMsV0FBQWhILE9BQUErRyxPQUFBRSxZQUdiQyxPQUFBQSxFQUVJQyxPQUFBQSxFQUdBOUMsRUFBQSxFQUFBQSxFQUFBK0MsRUFBQUMsT0FBQWhELElBT0l3QyxHQVZRTyxFQUFTL0MsR0FBR2lELGNBQWdCdEgsT0FBT3VILGlCQUFpQkgsRUFBUy9DLElBQUksSUFRekRtRCxnQkFFaEJDLFFBQUEsS0FBQSxJQUFBQSxRQUFBLE1BQUEsSUFBQUEsUUFBQSxNQUFBLElBQ1czQixRQUFZMEIsT0FBQUEsSUFHQ0EsSUFBWjFCLEVBQ1RvQixFQUFBQSxFQUFTTCxRQUFBLFdBQUFOLEdBRVlpQixJQUFiQSxJQUNSTixFQUFBQSxFQUFTTCxRQUFBLFdBQUFMLElBR2hCWSxFQUFTL0MsR0FBR0osTUFBTXlELGdCQUFsQixPQUEyQ1IsRUFBM0MsSUFHUlMsQ0FyQ1EsU0FSTyxXQVVWLFlBOUJBIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJ3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsICgpID0+IHtcclxuXHJcblxyXG4vKiDQmtCQ0KHQotCe0JzQndCr0JUg0KHQmtCg0JjQn9Ci0KsgKi9cclxuXHJcblxyXG4vKiBZYW5kZXggbWFwICovXHJcblxyXG4oZnVuY3Rpb24gKCl7XHJcblxyXG4gICAgeW1hcHMucmVhZHkoaW5pdCk7XHJcblxyXG4gICAgbGV0IG15TWFwLFxyXG4gICAgICAgIG15UGxhY2VtYXJrO1xyXG5cclxuICAgIGZ1bmN0aW9uIGluaXQoKXsgICAgXHJcbiAgICAgICAgXHJcbiAgICAgICAgbXlNYXAgPSBuZXcgeW1hcHMuTWFwKFwieWFuZGV4LW1hcFwiLCB7XHJcbiAgICAgICAgICAgIGNlbnRlcjogWzU1Ljc1MzU5NSwgMzcuNjIxMDMxXSxcclxuICAgICAgICAgICAgem9vbTogMTZcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbXlNYXAuYmVoYXZpb3JzLmRpc2FibGUoXCJzY3JvbGxab29tXCIpO1xyXG4gICAgICAgIG15TWFwLmJlaGF2aW9ycy5kaXNhYmxlKCdkcmFnJyk7XHJcbiAgICAgICAgbXlNYXAuZXZlbnRzLmFkZChcImNsaWNrXCIsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgbXlNYXAuYmVoYXZpb3JzLmVuYWJsZShcInNjcm9sbFpvb21cIilcclxuICAgICAgICBteU1hcC5iZWhhdmlvcnMuZW5hYmxlKCdkcmFnJylcclxuICAgICAgICB9KVxyXG4gICAgICAgIFxyXG4gICAgICAgIG15UGxhY2VtYXJrID0gbmV3IHltYXBzLlBsYWNlbWFyayhbNTUuNzUzNTk1LCAzNy42MjEwMzFdLCB7fSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgIHsgICAgICAgICBcclxuICAgICAgICBpY29uTGF5b3V0OiBcImRlZmF1bHQjaW1hZ2VcIixcclxuICAgICAgICBpY29uSW1hZ2VTaXplOiBbMjAsIDIwXSAgICAgICAgICAgXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgbXlNYXAuZ2VvT2JqZWN0cy5hZGQobXlQbGFjZW1hcmspOyAgICBcclxuICAgIH1cclxuXHJcbn0pKCk7XHJcbi8qIE1vYmlsZSBtZW51ICovXHJcblxyXG4oZnVuY3Rpb24gKCl7XHJcblxyXG4gICAgbGV0IG1lbnVCdXR0b24gPSAkKCcjbWVudV9fYnV0dG9uJyksXHJcblx0XHRtZW51TW9iaWxlID0gJCgnLm5hdi1saXN0JyksXHJcblx0XHRtZW51TGluayA9ICQoJy5uYXZfX2xpbmsnKSxcclxuXHRcdG1lbnVNb2JpbGVPcGVuID0gJ25hdi1saXN0LS1hY3RpdmUnO1xyXG5cclxuXHRmdW5jdGlvbiBzY3JlZW5XaWR0aENoZWNrKCkge1xyXG5cdFx0aWYgKG1lbnVCdXR0b24uaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XHJcblx0ICAgICAgICBtZW51QnV0dG9uLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuXHQgICAgfSBlbHNlIHtcclxuXHQgICAgICAgIG1lbnVCdXR0b24uYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG5cdCAgICB9XHJcblx0fTtcclxuXHJcblx0bWVudUJ1dHRvbi5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7XHJcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRtZW51TW9iaWxlLnRvZ2dsZUNsYXNzKG1lbnVNb2JpbGVPcGVuKTtcclxuXHRcdHNjcmVlbldpZHRoQ2hlY2soKTtcclxuXHRcdGNvbnNvbGUubG9nKCdZZXMnKTtcclxuXHR9KTtcclxuXHJcblx0bWVudUxpbmsub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XHJcblx0XHRtZW51TW9iaWxlLnJlbW92ZUNsYXNzKG1lbnVNb2JpbGVPcGVuKTtcclxuXHRcdHNjcmVlbldpZHRoQ2hlY2soKTtcclxuXHR9KTtcclxuXHJcblx0JCh3aW5kb3cpLnJlc2l6ZShmdW5jdGlvbigpIHtcclxuXHRcdGxldCB3ID0gJCh3aW5kb3cpLndpZHRoKCk7XHJcblx0XHRcdGlmICh3ID4gMTAyNCApIHtcclxuXHRcdFx0ICAgIG1lbnVNb2JpbGUucmVtb3ZlQXR0cignc3R5bGUnKTtcclxuXHRcdFx0ICAgIG1lbnVNb2JpbGUucmVtb3ZlQ2xhc3MobWVudU1vYmlsZU9wZW4pO1xyXG5cclxuXHRcdFx0ICAgIGlmIChtZW51QnV0dG9uLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG5cdCAgICAgICBcdFx0XHRtZW51QnV0dG9uLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuXHQgICAgICAgXHRcdH1cclxuXHRcdFx0fVxyXG5cdH0pO1xyXG5cclxufSkoKTtcclxuLyogU2xpY2sgc2xpZGVyIGNhcm91c2VsICovXHJcblxyXG4oZnVuY3Rpb24gKCl7XHJcblxyXG4gICAgJCgnI3NsaWNrJykuc2xpY2soe1xyXG4gICAgICBkb3RzOiBmYWxzZSxcclxuICAgICAgaW5maW5pdGU6IGZhbHNlLFxyXG4gICAgICBzcGVlZDogMTAwMCxcclxuICAgICAgdG91Y2hNb3ZlOiB0cnVlLFxyXG4gICAgICBzbGlkZXNUb1Nob3c6IDEsXHJcbiAgICAgIHNsaWRlc1RvU2Nyb2xsOiAxLFxyXG4gICAgICBkcmFnZ2FibGU6IHRydWUsXHJcbiAgICAgIHBhdXNlT25Ib3ZlcjogdHJ1ZSxcclxuICAgICAgcHJldkFycm93OiAnPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJzbGljay1hcnJvdyBzbGljay1wcmV2XCI+PHNwYW4+UHJldmlvdXM8L3NwYW4+PC9idXR0b24+JyxcclxuICAgICAgbmV4dEFycm93OiAnPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJzbGljay1hcnJvdyBzbGljay1uZXh0XCI+PHNwYW4+TmV4dDwvc3Bhbj48L2J1dHRvbj4nLFxyXG4gICAgICByZXNwb25zaXZlOiBbXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIGJyZWFrcG9pbnQ6IDYwMCxcclxuICAgICAgICAgICAgc2V0dGluZ3M6IHtcclxuICAgICAgICAgICAgICBhcnJvd3M6IGZhbHNlXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICBdXHJcbiAgICB9KTtcclxuICAgIFxyXG59KSgpO1xyXG4vKiBDYWxjdWxhdG9yICovXHJcblxyXG4oZnVuY3Rpb24gKCl7XHJcblxyXG4gICAgbGV0IHNxdWFyZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzcXVhcmUnKSxcclxuICAgICAgICBsYW1wcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsYW1wcycpLFxyXG4gICAgICAgIGNoZWNrYm94ZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2FsYy1jaGVja2JveF9faXRlbScpLFxyXG4gICAgICAgIGNhbGNCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2FsY19fYnRuJyksXHJcbiAgICAgICAgY2FsY1RvdGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RvdGFsJyksXHJcbiAgICAgICAgc3F1YXJlV2FybmluZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zcXVhcmUtd2FybmluZycpLFxyXG4gICAgICAgIGxhbXBzV2FybmluZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5sYW1wcy13YXJuaW5nJyksXHJcbiAgICAgICAgY2hlY2tib3hWYWx1ZSxcclxuICAgICAgICBsYW1wc1ByaWNlID0gNTAsXHJcbiAgICAgICAgdG90YWwgPSAwLFxyXG4gICAgICAgIHJlc3VsdCA9IDAsXHJcbiAgICAgICAgc3F1YXJlVmFsdWUgPSAwLFxyXG4gICAgICAgIGxhbXBzVmFsdWUgPSAwO1xyXG5cclxuXHJcbiAgICBzcXVhcmUuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCAoKSA9PiB7XHJcbiAgICBcdGlucHV0Q2hlY2soJ3NxdWFyZScsIC9eWzAtOVxcLl0qWy5dP1swLTldKiQvKTtcclxuXHQgICAgc3F1YXJlVmFsdWUgPSBzcXVhcmUudmFsdWU7XHJcblx0ICAgIHNxdWFyZVdhcm5pbmcuc3R5bGUuZGlzcGxheSA9ICcnO1xyXG5cdCAgICBsYW1wc1dhcm5pbmcuc3R5bGUuZGlzcGxheSA9ICcnO1xyXG5cdCAgICBjYWxjVG90YWwudGV4dENvbnRlbnQgPSAwO1xyXG4gICAgICAgIHRvdGFsID0gY2hlY2tib3hWYWx1ZSAqIHNxdWFyZVZhbHVlICsgKGxhbXBzVmFsdWUgKiBsYW1wc1ByaWNlKTtcclxuXHR9KTtcclxuXHJcblx0bGFtcHMuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCAoKSA9PiB7XHJcblx0XHRpbnB1dENoZWNrKCdsYW1wcycsIC9eWzAtOV0qJC8pO1xyXG5cdFx0bGFtcHNWYWx1ZSA9IGxhbXBzLnZhbHVlO1xyXG5cdFx0c3F1YXJlV2FybmluZy5zdHlsZS5kaXNwbGF5ID0gJyc7XHJcblx0ICAgIGxhbXBzV2FybmluZy5zdHlsZS5kaXNwbGF5ID0gJyc7XHJcbiAgICAgICAgY2FsY1RvdGFsLnRleHRDb250ZW50ID0gMDtcclxuICAgICAgICB0b3RhbCA9IGNoZWNrYm94VmFsdWUgKiBzcXVhcmVWYWx1ZSArIChsYW1wc1ZhbHVlICogbGFtcHNQcmljZSk7XHJcblx0fSk7XHJcblxyXG4gICAgZnVuY3Rpb24gY2hlY2tib3hlc0NoZWNrKCkgeyBcdFxyXG5cdCAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hlY2tib3hlcy5sZW5ndGg7IGkrKykge1xyXG5cdCAgIFx0ICAgIGlmIChjaGVja2JveGVzW2ldLmNoZWNrZWQpIHtcclxuICAgICAgICAgICAgICAgY2hlY2tib3hWYWx1ZSA9IGNoZWNrYm94ZXNbaV0udmFsdWU7XHJcblx0ICAgXHQgICAgfVxyXG5cdCAgIFx0IFxyXG5cdCAgIFx0ICAgIGNoZWNrYm94ZXNbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY2FsY1RvdGFsLnRleHRDb250ZW50ID0gMDtcclxuICAgICAgICAgICAgICAgXHRjaGVja2JveFZhbHVlID0gY2hlY2tib3hlc1tpXS52YWx1ZTtcclxuICAgICAgICAgICAgICAgIHRvdGFsID0gY2hlY2tib3hWYWx1ZSAqIHNxdWFyZVZhbHVlICsgKGxhbXBzVmFsdWUgKiBsYW1wc1ByaWNlKTtcclxuXHQgICBcdCAgIH0pOyAgXHJcblx0ICAgIH1cclxuXHR9O1xyXG4gICAgY2hlY2tib3hlc0NoZWNrKCk7XHJcblx0XHJcbiAgICBjYWxjQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgXHRpZiAoc3F1YXJlVmFsdWUgPT0gJycgJiYgbGFtcHNWYWx1ZSA9PSAnJykge1xyXG4gICAgXHRcdHRvdGFsID0gMDtcclxuICAgIFx0XHRzcXVhcmVXYXJuaW5nLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG4gICAgXHRcdGxhbXBzV2FybmluZy5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcclxuICAgIFx0fSBlbHNlIGlmIChzcXVhcmVWYWx1ZSA9PSAwICYmIGxhbXBzVmFsdWUgPT0gMCkge1xyXG4gICAgXHRcdHRvdGFsID0gMDtcclxuICAgIFx0XHRzcXVhcmVXYXJuaW5nLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG4gICAgXHRcdGxhbXBzV2FybmluZy5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcclxuICAgIFx0fSBlbHNlIGlmIChzcXVhcmVWYWx1ZSA9PSAnJyB8fCBzcXVhcmVWYWx1ZSA9PSAwKSB7XHJcbiAgICBcdFx0dG90YWwgPSAwO1xyXG4gICAgXHRcdHNxdWFyZVdhcm5pbmcuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XHJcbiAgICBcdH0gZWxzZSBpZiAobGFtcHNWYWx1ZSA9PSAnJyB8fCBsYW1wc1ZhbHVlID09IDApIHtcclxuICAgIFx0XHR0b3RhbCA9IDA7XHJcbiAgICBcdFx0bGFtcHNXYXJuaW5nLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG4gICAgXHR9IGVsc2Uge1xyXG4gICAgXHQgICAgc3F1YXJlV2FybmluZy5zdHlsZS5kaXNwbGF5ID0gJyc7XHJcblx0ICAgICAgICBsYW1wc1dhcm5pbmcuc3R5bGUuZGlzcGxheSA9ICcnO1xyXG4gICAgICAgICAgICBhbmltYXRlVmFsdWUoJ3RvdGFsJywgMCwgdG90YWwsIDMwMDApO1xyXG4gICAgXHR9ICAgXHJcblx0fSk7XHJcblxyXG5cdGZ1bmN0aW9uIGFuaW1hdGVWYWx1ZShpZCwgc3RhcnQsIGVuZCwgZHVyYXRpb24pIHtcclxuICAgICAgICBsZXQgcmFuZ2UgPSBlbmQgLSBzdGFydCxcclxuICAgICAgICAgICAgY3VycmVudCA9IHN0YXJ0LFxyXG4gICAgICAgICAgICBpbmNyZW1lbnQgPSA1MCxcclxuICAgICAgICAgICAgc3RlcFRpbWUgPSBNYXRoLmFicyhNYXRoLmZsb29yKGR1cmF0aW9uIC8gcmFuZ2UpKSxcclxuICAgICAgICAgICAgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTsgXHJcbiAgICBcclxuICAgICAgICBsZXQgdGltZXIgPSBzZXRJbnRlcnZhbCggKCkgPT4ge1xyXG4gICAgICAgICAgICBjdXJyZW50ICs9IGluY3JlbWVudDsgXHJcbiAgICAgICAgICAgIGVsZW1lbnQudGV4dENvbnRlbnQgID0gY3VycmVudDsgXHJcblxyXG4gICAgICAgIGlmIChjdXJyZW50ID49IGVuZCkge1xyXG4gICAgICAgICAgICBjbGVhckludGVydmFsKHRpbWVyKTtcclxuICAgICAgICB9XHJcbiAgICB9LCBzdGVwVGltZSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBpbnB1dENoZWNrKGlkLCByZWdleCkge1xyXG5cdFx0bGV0IGVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7XHJcblx0XHRcdGlmIChlbGVtZW50KSB7XHJcblx0XHQgICAgXHRsZXQgbGFzdFZhbHVlID0gZWxlbWVudC52YWx1ZTtcclxuXHRcdCAgICBpZiAoIXJlZ2V4LnRlc3QobGFzdFZhbHVlKSkge1xyXG5cdFx0ICAgICAgXHRsYXN0VmFsdWUgPSAnJztcclxuXHRcdCAgICB9IFx0XHJcblx0XHQgICAgc2V0SW50ZXJ2YWwoICgpID0+IHtcclxuXHRcdCAgICAgICAgbGV0IHZhbHVlID0gZWxlbWVudC52YWx1ZTtcclxuXHRcdCAgICAgICAgICAgIGlmICh2YWx1ZSAhPSBsYXN0VmFsdWUpIHtcclxuXHRcdCAgICAgICAgICAgICAgIGlmIChyZWdleC50ZXN0KHZhbHVlKSkge1xyXG5cdFx0ICAgICAgICAgICAgICAgICAgIGxhc3RWYWx1ZSA9IHZhbHVlO1xyXG5cdFx0ICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudmFsdWUgPSBsYXN0VmFsdWU7XHJcblx0XHQgICAgICAgICAgICAgICAgfVxyXG5cdFx0ICAgICAgICAgICAgfVxyXG5cdFx0ICAgIH0sIDEwKTtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxufSkoKTtcclxuLyogU21vb3RoIHNjcm9sbCAqL1xyXG5cclxuKGZ1bmN0aW9uICgpeyBcclxuXHJcbiAgICAkKFwibmF2IGEsYVtocmVmPScjdG9wJ10sYVtyZWw9J21fUGFnZVNjcm9sbDJpZCddLGEuUGFnZVNjcm9sbDJpZFwiKVxyXG4gICAgICAgIC5tUGFnZVNjcm9sbDJpZCh7aGlnaGxpZ2h0U2VsZWN0b3I6XCJuYXYgYVwiXHJcbiAgICB9KTtcclxuXHJcbn0pKCk7XHJcbi8qIFdvdyBzY3JpcHQgKi9cclxuXHJcbihmdW5jdGlvbiAoKXsgXHJcblxyXG4gICAgbmV3IFdPVygpLmluaXQoKTtcclxuXHJcbn0pKCk7XHJcbi8qIFNjcm9sbCB0byB0b3AgKi9cclxuXHJcbihmdW5jdGlvbiAoKXsgXHJcbiBcclxuICAgICQod2luZG93KS5zY3JvbGwoIGZ1bmN0aW9uKCkge1xyXG4gXHJcbiAgICAgICAgaWYoJCh0aGlzKS5zY3JvbGxUb3AoKSA+IDcwMCkge1xyXG4gICAgICAgICAgICAkKCcjdG9Ub3AnKS5mYWRlSW4oKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAkKCcjdG9Ub3AnKS5mYWRlT3V0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiBcclxuICAgICQoJyN0b1RvcCcpLmNsaWNrKCBmdW5jdGlvbigpIHtcclxuICAgICAgICAkKCdib2R5LGh0bWwnKS5hbmltYXRlKHtzY3JvbGxUb3A6MH0sODAwKTtcclxuICAgIH0pO1xyXG4gXHJcbn0pKCk7XHJcbi8qIEJhY2tncm91bmQgaW1hZ2UgdHlwZSBjaG9pY2UgYWNjb3JkaW5nIHRvIHRoZSBjdXJyZW50IGJyb3dzZXIgYW5kIGl0J3MgdmVyc2lvbiAqL1xyXG5cclxuKGZ1bmN0aW9uICgpe1xyXG5cclxuLyogQnJvd3NlciB3ZWJQIHN1cHBvcnQgY2hlY2sgKi9cclxuICAgIGZ1bmN0aW9uIHRlc3RXZWJQKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgbGV0IHdlYlAgPSBuZXcgSW1hZ2UoKTsgICAgIFxyXG4gICAgICAgICAgICB3ZWJQLnNyYyA9ICdkYXRhOmltYWdlL3dlYnA7YmFzZTY0LFVrbEdSaTRBQUFCWFJVSlFWbEE0VENFQUFBQXZBVUFBRUI4d0FpTXcnICsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgJ0FnU1NOdHNlL2NYanh5Q0NtcllOV1B3bUhSSDlqd01BJztcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgd2ViUC5vbmxvYWQgPSB3ZWJQLm9uZXJyb3IgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNhbGxiYWNrKHdlYlAuaGVpZ2h0ID09PSAyKTsgICAgIFxyXG4gICAgICAgIH07IFxyXG4gICAgfTtcclxuICAgIGxldCBicm93c2VyO1xyXG5cclxuICAgIHRlc3RXZWJQKGZ1bmN0aW9uKHN1cHBvcnRlZCkge1xyXG4gICAgICAgIGlmIChzdXBwb3J0ZWQpIHtcclxuICAgICAgICAgICAgYnJvd3NlciA9IHRydWU7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfQn9C+0LTQtNC10YDQttC40LLQsNC10YIgd2VicCcpO1xyXG4gICAgICAgIFx0cmV0dXJuIGJyb3dzZXJcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBicm93c2VyID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfQndC1INC/0L7QtNC00LXRgNC20LjQstCw0LXRgiB3ZWJwJyk7XHJcbiAgICAgICAgXHRyZXR1cm4gYnJvd3NlclxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuLyogU3VwcG9ydGVkIGltYWdlIHR5cGUgY2hvaWNlIG9wdGlvbnMgKi9cclxuICAgIGNvbnN0IGJnSW1nT3B0ID0ge1xyXG4gICAgXHRpbWFnZXM6ICdiZy1pbWcnLCAgLy8g0JrQu9Cw0YHRgSDRjdC70LXQvNC10L3RgtC+0LIsINCyINC60L7RgtC+0YDRi9GFINC90LXQvtCx0YXQvtC00LjQvNCwINC30LDQvNC10L3QsCDQutCw0YDRgtC40L3QvtC6XHJcbiAgICAgICAgcHJldlVybEVuZDogJ0AxeC5qcGcnLCAvLyDQntGB0L3QvtCy0L3QvtC5IChqcGcpINGE0L7RgNC80LDRgiDQutCw0YDRgtC40L3QvtC6XHJcbiAgICAgICAgdXJsV2VicDF4OiAnQDF4LndlYnAnLCAvLyBXZWJQINGE0L7RgNC80LDRgiDQutCw0YDRgtC40L3QvtC6INC00LvRjyDQvtCx0YvRh9C90YvRhSDRjdC60YDQsNC90L7QslxyXG4gICAgICAgIHVybFdlYnAyeDogJ0AyeC53ZWJwJywgLy8gV2ViUCDRhNC+0YDQvNCw0YIg0LrQsNGA0YLQuNC90L7QuiDQtNC70Y8g0Y3QutGA0LDQvdC+0LIg0YEg0YDQsNC30YDQtdGI0LXQvdC40LXQvCDQvtGCIDEuNSBEUElcclxuICAgICAgICB1cmxKcGcyeDogJ0AyeC5qcGcnLCAvLyBKcGcg0YTQvtGA0LzQsNGCINC60LDRgNGC0LjQvdC+0Log0LTQu9GPINGN0LrRgNCw0L3QvtCyINGBINGA0LDQt9GA0LXRiNC10L3QuNC10Lwg0L7RgiAxLjUgRFBJXHJcbiAgICB9XHJcblxyXG4vKiDQpNGD0L3QutGG0LjRjyDQstGL0LHQvtGA0LAg0YTQvtGA0LzQsNGC0LAg0YTQvtC90L7QstGL0YUg0LrQsNGA0YLQuNC90L7QuiDQsiDQt9Cw0LLQuNGB0LjQvNC+0YHRgtC4INC+0YIg0YLQuNC/0LAg0LHRgNCw0YPQt9C10YDQsCDQuCDRgNCw0LfRgNC10YjQtdC90LjRjyDRjdC60YDQsNC90LAgKi9cclxuICAgIGZ1bmN0aW9uIGltYWdlVHlwZUNoYW5nZShpbWFnZXMsIHVybFdlYnAxeCwgdXJsV2VicDJ4LCB1cmxKcGcyeCwgcHJldlVybEVuZCkge1xyXG5cclxuICAgICAgICAgICAgLy8g0J/RgdC10LLQtNC+0LzQsNGB0YHQuNCyINGN0LvQtdC80LXQvdGC0L7QsiDRgSDRhNC+0L3QvtCy0YvQvNC4INC60LDRgNGC0LjQvdC60LDQvNC4XHJcbiAgICBcdGxldCBiZ0ltYWdlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYC4ke2ltYWdlc31gKSwgXHJcbiAgICBcdCAgICAvLyDQn9GA0L7QstC10YDQutCwIERQSSDRjdC60YDQsNC90LAg0YPRgdGC0YDQvtC50YHRgtCy0LAg0LTQu9GPINCy0YHQtdGFINCx0YDQsNGD0LfQtdGA0L7QsiDQuCDQtNC70Y8gSUUgMTBcclxuICAgIFx0ICAgIHBpeGVsUmF0aW8gPSB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyB8fCB3aW5kb3cuc2NyZWVuLmRldmljZVhEUEkgLyB3aW5kb3cuc2NyZWVuLmxvZ2ljYWxYRFBJLFxyXG4gICAgXHQgICAgaW1hZ2VMaXN0LCAvLyDQodC/0LjRgdC+0Log0YLQtdC60YPRidC40YUg0YHRgdGL0LvQvtC6INC90LAg0YTQvtC90L7QstGL0LUg0LrQsNGA0YLQuNC90LrQuFxyXG4gICAgICAgICAgICBjdXJyZW50SW1hZ2UsIC8vINCi0LXQutGD0YnQsNGPINC60LDRgNGC0LjQvdC60LBcclxuICAgICAgICAgICAgbmV3VVJMLCAvLyDQndC+0LLQsNGPINGB0YHRi9C70LrQsCDQtNC70Y8g0LrQsNGA0YLQuNC90LrQuFxyXG4gICAgICAgICAgICBpbWFnZUZvbGRlckluZGV4LCAvLyDQntGB0L3QvtCy0L3QsNGPINC/0LDQv9C60LAg0LTQu9GPINGF0YDQsNC90LXQvdC40Y8g0LrQsNGA0YLQuNC90L7QuiDQvdCwINGB0LXRgNCy0LXRgNC1ICAgICBcclxuICAgICAgICAgICAgcHVyZVVybDsgLy8g0KfQuNGB0YLQsNGPINGB0YHQu9GL0LrQsCDQsdC10LcgdXJsLCDQutCw0LLRi9GH0LXQuiDQuCDRgdC60L7QsdC+0LpcclxuXHJcbiAgICAgICAgLy8g0J/QtdGA0LXQsdC+0YAg0L/RgdC10LLQtNC+0LzQsNGB0YHQuNCy0LAg0Y3Qu9C10LzQtdC90YLQvtCyINGBINGE0L7QvdC+0LLRi9C80Lgg0LrQsNGA0YLQuNC90LrQsNC80LhcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJnSW1hZ2VzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgXHQvLyDQpNC+0YDQvNC40YDQvtCy0LDQvdC4INGB0L/QuNGB0LrQsCDRgtC10LrRg9GJ0LjRhSDRgdGB0YvQu9C+0Log0L3QsCDQutCw0YDRgtC40L3QutC4INC00LvRjyBJRSDQuCDQvtGB0YLQsNC70YzQvdGL0YUg0LHRgNCw0YPQt9C10YDQvtCyXHJcbiAgICAgICAgICAgIGltYWdlTGlzdCA9IGJnSW1hZ2VzW2ldLmN1cnJlbnRTdHlsZSB8fCB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShiZ0ltYWdlc1tpXSwgZmFsc2UpO1xyXG4gICAgICAgICAgICAvLyDQktGL0LHQvtGAINGC0LXQutGD0YnQtdC5INGB0YHRi9C70LrQuCDQvdCwINC60LDRgNGC0LjQvdC60YMg0LjQtyDRgdC/0LjRgdC60LBcclxuICAgICAgICAgICAgY3VycmVudEltYWdlID0gaW1hZ2VMaXN0LmJhY2tncm91bmRJbWFnZTtcclxuICAgICAgICAgICAgLy8g0JLRi9GA0LXQt9Cw0L3QuNC1INC70LjRiNC90LjRhSDRgdC40LzQstC+0LvQvtCyINC4INC/0L7Qu9GD0YfQtdC90LjQtSDRh9C40YHRgtC+0Lkg0YHRgdGL0LvQutC4XHJcbiAgICAgICAgICAgIHB1cmVVcmwgPSBjdXJyZW50SW1hZ2UucmVwbGFjZSgvXCIvZywgJycpLnJlcGxhY2UoL1xcKC9nLCAnJykucmVwbGFjZSgvXFwpL2csICcnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL3VybC9nLCAnJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8g0J7Qv9GA0LXQtNC10LvQtdC90LjQtSDRgdGB0YvQu9C+0Log0L3QsCDQutCw0YDRgtC40L3QutC4INGE0L7RgNC80LDRgtCwIHdlYlAg0LTQu9GPINC+0LHRi9GH0L3Ri9GFINGN0LrRgNCw0L3QvtCyXHJcbiAgICAgICAgICAgICAgICBpZiAodGVzdFdlYlAgJiYgcGl4ZWxSYXRpbyA9PT0gMSkgeyBcclxuICAgICAgICAgICAgICAgICAgIG5ld1VSTCA9IHB1cmVVcmwucmVwbGFjZSgvQDF4LmpwZy9nLCB1cmxXZWJwMXgpO1xyXG4gICAgICAgICAgICAgICAgLy8g0J7Qv9GA0LXQtNC10LvQtdC90LjQtSDRgdGB0YvQu9C+0Log0L3QsCDQutCw0YDRgtC40L3QutC4INGE0L7RgNC80LDRgtCwIHdlYlAg0LTQu9GPINGN0LrRgNCw0L3QvtCyINGBINGA0LDQt9GA0LXRiNC10L3QuNC10Lwg0LHQvtC70LXQtSAxLjUgRFBJXHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRlc3RXZWJQICYmIHBpeGVsUmF0aW8gPiAxLjUpIHtcclxuICAgICAgICAgICAgICAgICAgIG5ld1VSTCA9IHB1cmVVcmwucmVwbGFjZSgvQDF4LmpwZy9nLCB1cmxXZWJwMngpO1xyXG4gICAgICAgICAgICAgICAgLy8g0J7Qv9GA0LXQtNC10LvQtdC90LjQtSDRgdGB0YvQu9C+0Log0L3QsCDQutCw0YDRgtC40L3QutC4INGE0L7RgNC80LDRgtCwIGpwZyDQtNC70Y8g0Y3QutGA0LDQvdC+0LIg0YEg0YDQsNC30YDQtdGI0LXQvdC40LXQvCDQsdC+0LvQtdC1IDEuNSBEUElcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIXRlc3RXZWJQICYmIHBpeGVsUmF0aW8gPiAxLjUpIHtcclxuICAgICAgICAgICAgICAgICAgIG5ld1VSTCA9IHB1cmVVcmwucmVwbGFjZSgvQDF4LmpwZy9nLCB1cmxKcGcyeCk7XHJcbiAgICAgICAgICAgICAgICAvLyDQntC/0YDQtdC00LXQu9C10L3QuNC1INGB0YHRi9C70L7QuiDQvdCwINC60LDRgNGC0LjQvdC60Lgg0YTQvtGA0LzQsNGC0LAganBnINC00LvRjyDQvtCx0YvRh9C90YvRhSDRjdC60YDQsNC90L7QslxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICghdGVzdFdlYlAgJiYgcGl4ZWxSYXRpbyA9PT0gMSl7XHJcbiAgICAgICAgICAgICAgICAgICBuZXdVUkwgPSBwdXJlVXJsLnJlcGxhY2UoL0AxeC5qcGcvZywgcHJldlVybEVuZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgIGJnSW1hZ2VzW2ldLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoJHtuZXdVUkx9KWA7IC8vINCj0YHRgtCw0L3QvtCy0LrQsCDQvdC+0LLRi9GFINGB0YHRi9C70L7QulxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGltYWdlVHlwZUNoYW5nZShiZ0ltZ09wdC5pbWFnZXMsIGJnSW1nT3B0LnVybFdlYnAxeCwgYmdJbWdPcHQudXJsV2VicDJ4LCBcclxuICAgIFx0ICAgICAgICAgICBiZ0ltZ09wdC51cmxKcGcyeCwgYmdJbWdPcHQucHJldlVybEVuZCk7XHJcblxyXG59KSgpO1xyXG5cclxufSk7Il19
